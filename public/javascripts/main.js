// Generated by CoffeeScript 1.12.7
(function() {
  var ShoppingCart;

  window.ShoppingCart = ShoppingCart = (function() {
    function ShoppingCart() {
      this.incrementCount = ".Item_incrCount";
      this.decrementCount = ".Item_decCount";
      this.addToCartButton = ".Item_addToCart";
      this.removeFromCartButton = ".Item_removeFromCart";
    }

    ShoppingCart.prototype.init = function() {
      this.registerIncrementQuantity();
      this.registerDecrementQuantity();
      this.registerAddToCart();
      return this.registerRemoveFromCart();
    };

    ShoppingCart.prototype.registerAddToCart = function() {
      return $(this.addToCartButton).on("click", (function(_this) {
        return function(e) {
          var $this, counterElements, imgSource, itemName, itemPrice, itemQty;
          $this = $(e.target);
          counterElements = $this.parent(".Item_operations").find("ul");
          $this.addClass("Hide");
          $this.parent(".Item_operations").find(_this.removeFromCartButton).removeClass("Hide");
          itemName = $this.parents(".Item_info").find(".Item_name").html();
          itemPrice = $this.parents(".Item_info").find(".Item_price").html();
          itemQty = $this.parents(".Item_info").find(".Item_qty").html();
          imgSource = $this.parents(".Item_info").find("img").attr("src");
          console.log(itemName + " " + itemPrice + " " + itemQty + " " + imgSource);
          return $.ajax({
            url: "/addtocart?itemName=" + itemName + "&itemPrice=" + itemPrice + "&itemQty=" + itemQty + "&imgSource=" + imgSource,
            success: function(result) {}
          });
        };
      })(this));
    };

    ShoppingCart.prototype.registerRemoveFromCart = function() {
      return $(this.removeFromCartButton).on("click", (function(_this) {
        return function(e) {
          var $this, itemName;
          $this = $(e.target);
          $this.addClass("Hide");
          $this.parent(".Item_operations").find(_this.addToCartButton).removeClass("Hide");
          $this.parents(".Item_info").find(".Item_qty").html("1");
          itemName = $this.parents(".Item_info").find(".Item_name").html();
          console.log(itemName);
          return $.ajax({
            url: "/removefromcart?itemName=" + itemName,
            success: function(result) {}
          });
        };
      })(this));
    };

    ShoppingCart.prototype.registerIncrementQuantity = function() {
      return $(this.incrementCount).on("click", (function(_this) {
        return function(e) {
          var $this, finalQty, initialQty;
          $this = $(e.target);
          initialQty = $this.parent(".Item_counter").find(".Item_qty");
          finalQty = parseInt($(initialQty).html()) + 1;
          return $(initialQty).html(finalQty);
        };
      })(this));
    };

    ShoppingCart.prototype.registerDecrementQuantity = function() {
      return $(this.decrementCount).on("click", (function(_this) {
        return function(e) {
          var $this, finalQty, initialQty;
          $this = $(e.target);
          initialQty = $this.parent(".Item_counter").find(".Item_qty");
          if (!($(initialQty).html() === "1")) {
            finalQty = parseInt($(initialQty).html()) - 1;
            return $(initialQty).html(finalQty);
          }
        };
      })(this));
    };

    return ShoppingCart;

  })();

  $(document).ready(function() {
    var shoppingCart;
    shoppingCart = new ShoppingCart();
    return shoppingCart.init();
  });

}).call(this);
